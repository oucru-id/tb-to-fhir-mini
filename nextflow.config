params {
    vcf_dir         = "$baseDir/data/VCF" 
    deeplex_dir     = "$baseDir/data/Deeplex"
    reference       = "$baseDir/data/H37Rv.fasta"
    mutation_db     = "$baseDir/data/WHO-UCN-TB-2023.csv"
    results_dir     = "$baseDir/results"
    fhir_validator  = "$baseDir/tools/fhir-validator.jar"
    version         = "1.3.0"
    repetitive_regions = "$baseDir/data/repetitive_regions.bed"
    lineage_barcode = "$baseDir/data/lineage_fix.bed"
    clinical_metadata = "$baseDir/data/clinical_metadata.csv"
    clinical_metadata_deeplex = "$baseDir/data/clinical_metadata_deeplex.csv"
}

process {

    withName: annotate {
        cpus = 6
        memory = '6 GB'
    }

    withName: CREATE_FHIR {
        cpus = 6
        memory = '6 GB'
    }
    
    withName: VALIDATE_FHIR {
        cpus = 6
        memory = '8 GB'
    }

    scratch = true
}


profiles {
    standard {
        process.executor = 'local'
    }
    
    hpc {
        process.executor = 'slurm'
        process.queue = 'normal'
    }
    
    test {
        params.vcf_dir = 'test_data/VCF'
        params.deeplex_dir = 'test_data/Deeplex'
        params.max_threads = 2
    }
}

docker {
    enabled = false
    runOptions = '-u $(id -u):$(id -g) --rm'
    fixOwnership = false
}

singularity {
    enabled = false
}

params {
    max_cpus = 8
    max_memory = '16 GB'
    max_time = '24h'
}

report {
    enabled = true
    file = "$baseDir/results/runningstat/execution.html"
    overwrite = true
}

timeline {
    enabled = true
    file = "$baseDir/results/runningstat/timeline.html"
    overwrite = true
}

dag {
    enabled = true
    file = "$baseDir/results/runningstat/dag.html"
    overwrite = true
}